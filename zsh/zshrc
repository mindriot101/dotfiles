export PATH=${HOME}/anaconda/bin:${HOME}/.bin:${HOME}/.bin/ngts:${HOME}/.cabal/bin:/usr/local/bin:${PATH}:${HOME}/bin
fpath=($HOME/.zsh/func $HOME/.zsh/completion $fpath)
typeset -U fpath

# Report the time taken for any long running command
REPORTTIME=10

# Disable Ctrl-s freezing the terminal
stty stop undef

autoload -U compinit
compinit

# Disable non-standard implicit tee/cat behaviour
unsetopt multios

autoload -U bashcompinit

# Emacs keybindings
bindkey -e
bindkey "^R" history-incremental-search-backward

# Set up editor in command line
autoload edit-command-line
zle -N edit-command-line
bindkey '^Xe' edit-command-line

autoload -U colors
colors

setopt interactivecomments
setopt rmstarsilent
setopt prompt_subst
setopt inc_append_history
setopt share_history
unsetopt auto_pushd

# Only unique history entries in the reverse history search HIST_FIND_NO_DUPS=1
setopt hist_ignore_all_dups
setopt hist_ignore_dups


# Ignore duplicate history entries
zstyle ':completion:*:history-words' stop yes
zstyle ':completion:*:history-words' remove-all-dups yes
zstyle ':completion:*:history-words' list false
zstyle ':completion:*:history-words' menu yes

# Speed up completion
zstyle ':completion:*' accept-exact '*(N)'

# Use a cache for completion
zstyle ':completion:*' use-cache on


HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000






export GOPATH=${HOME}/dev/gocode

export EDITOR=vim
export VISUAL=${EDITOR}
export BIBINPUTS=${HOME}/work/central-bibliography:${BIBINPUTS}
export LESS='-FXR'

# Taken from grb's zshrc

# By default, zsh considers many characters part of a word (e.g., _ and -).
# Narrow that down to allow easier skipping through words via M-f and M-b.
export WORDCHARS='*?[]~&;!$%^<>'


export BUILD_PREFIX="${HOME}/.local"
export MANPATH=${BUILD_PREFIX}/share/man:${MANPATH}
export PATH=${BUILD_PREFIX}/bin:${PATH}:${HOME}/.nimble/bin


export WASP="${work}/WASP"
export NGTS="${work}/NGTS"
export ZLP="${NGTS}/pipeline/ZLP"
export LOGDIR="${HOME}/var/log"
export TREE_CHARSET=ascii               # For rendering with the `tree` command

# Source the custom zshrc.local file in the system
if [[ -f ${HOME}/.zshrc.local ]]; then
    source ${HOME}/.zshrc.local
fi

# Setup direnv
if type direnv >/dev/null; then
    _direnv_hook() {
    eval "$(direnv export zsh)";
    }
    typeset -a precmd_functions
    if [[ -z $precmd_functions[(r)_direnv_hook] ]]; then
    precmd_functions+=_direnv_hook;
    fi
fi

# source external zsh setup files
for file in ~/.zsh/setup/*.zsh; do
    source $file
done

# Set up dtags
command -v dtags > /dev/null 2>&1 && . <(dtags shell zsh)


# Finally source the theme
source ${HOME}/.zsh/srwalker101.zsh-theme
