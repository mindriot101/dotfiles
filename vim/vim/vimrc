"  Init
" Remap the leader key to comma
let g:mapleader=','
let g:maplocalleader='\\'

if &compatible | set nocompatible | endif

augroup vimrc
    autocmd!
augroup END

" 
"  Plugins
"  Vim Plug
call plug#begin('~/.vim/bundle')

Plug 'tpope/vim-unimpaired'
Plug 'rust-lang/rust.vim'
Plug 'cespare/vim-toml'
Plug 'christoomey/vim-tmux-runner'
Plug 'junegunn/fzf', { 'dir': '~/.fzf', 'do': 'yes \| ./install --no-update-rc --no-completion --key-bindings' }
Plug 'junegunn/fzf.vim'
Plug 'Shougo/deoplete.nvim', { 'do': ':UpdateRemotePlugins' }
Plug 'sebastianmarkow/deoplete-rust'
Plug 'zchee/deoplete-jedi'
Plug 'neomake/neomake'
Plug 'kassio/neoterm'

call plug#end()

set ignorecase
set smartcase
set tabstop=4
set expandtab
set shiftwidth=4
set incsearch
set background=dark
colorscheme srw256
set mouse=a
set smartindent
set cindent
set report=0
set noesckeys
set hidden
set lazyredraw
set shortmess=atI
set wildignore+=*.aux,*.o,*.git,/tmp/*,*.so,*.swp,*.zip,.venv,env,*.pyc
set switchbuf=useopen
set softtabstop=4
set shiftround
set noshowmatch
set matchtime=0
set tags=.git/tags,tags;/

" Search with fancy regex search by default
nnoremap / /\v
nnoremap ? ?\v

" Add mapping for copying all file contents into the system buffer
nnoremap cp :0,$y+<Cr>

" Swap the mark keys
nnoremap ' `
nnoremap ` '

" Reselect visual block after indent/outdent
vnoremap < <gv
vnoremap > >gv

if executable('ag')
    set grepprg=ag\ --nogroup\ --nocolor
endif

nnoremap <space> :nohlsearch<cr>

" FZF
set rtp+=~/.fzf
let g:fzf_command_prefix = 'Fzf'
nnoremap <leader>f :FzfGitFiles<cr>
nnoremap gb :FzfBuffers<cr>
nnoremap gs :FzfTags<cr>
nnoremap gL :FzfLines<cr>
nnoremap gl :FzfBLines<cr>
nnoremap <leader>a :Ag<cr>

" Deoplete
let g:deoplete#enable_at_startup = 1

" deoplete-rust
let g:deoplete#sources#rust#racer_binary = "/Users/simon/.cargo/bin/racer"

" Configure vim tmux runner
let g:VtrStripLeadingWhitespace = 0
let g:VtrClearEmptyLines = 0
let g:VtrAppendNewline = 1

nnoremap <leader>v :VtrAttachToPane<cr>

" Create shorter 'V' command which is easier to type
command! -nargs=? V call VtrSendCommand(<f-args>)

" Remap the move-window keys
noremap <C-h> <C-w>h
noremap <C-j> <C-w>j
noremap <C-k> <C-w>k
noremap <C-l> <C-w>l

" Change the way tab autocompletion works
set wildmode=longest,list:longest

if has('nvim')

	if hostname() =~? "ngts"
		let g:python_host_prog = '/home/sw/.pyenv/versions/2.7.11/bin/python'
		let g:python3_host_prog = '/home/sw/.pyenv/versions/miniconda3-latest/bin/python'
		set shell=/home/sw/.local/bin/zsh
	else
		let g:python_host_prog = '/usr/local/bin/python'
		let g:python3_host_prog = '/usr/local/bin/python3'
		set shell=/usr/local/bin/zsh
	endif

endif

" vim: foldmethod=marker
