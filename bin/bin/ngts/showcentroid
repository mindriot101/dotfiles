#!/usr/bin/env python
# -*- coding: utf-8 -*-

import glob
import sys
import subprocess as sp
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('-F', '--field', required=True)
parser.add_argument('-O', '--obj-id', required=True, type=int)
args = parser.parse_args()


files = glob.iglob('/home/maxg/Centroiding/candidates_TEST18_20170119/*_analysis.pdf')
matching_files = [filename for filename in files
                  if args.field in filename
                  and '{:06d}'.format(args.obj_id) in filename]
if len(matching_files) > 1:
    print('Ambiguous: {}'.format(matching_files), file=sys.stderr)
elif len(matching_files) == 0:
    print('Cannot find file', file=sys.stderr)
else:
    sp.check_call(['evince', matching_files[0]])

