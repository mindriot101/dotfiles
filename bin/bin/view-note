#!/bin/sh

set -eou pipefail

noteName=${HOME}/notes/html/note-$(date +%Y-%m-%d).html

function buildnote() {
    srcName="$(echo $noteName | sed 's/html/src/' | sed 's/html/md/')"
    test -f $srcName || {
        echo "Cannot find source file $sourceName" >&2
        return 1
    }

    pandoc \
        -t html5 \
        --template Github.html5 \
        --metadata title="Notes" \
        -o "$noteName" $srcName
    wait
}

buildnote
open $noteName
